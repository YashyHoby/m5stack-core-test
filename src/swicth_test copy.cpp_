#include <M5Stack.h>    // M5Stackライブラリを使いますという宣言です。Core2の場合はM5Core2.hです
#include "swicth_test.h"

const int switchPin = 22;  // タクトスイッチを接続するGPIOピン

// M5Stackが起動した時に行われる処理を書きます。
void swicth_test_setup() {
    M5.begin();       // M5Stackの初期化
    M5.Power.begin(); // バッテリーの初期化

    // スイッチピンを入力モードに設定し、内部プルアップ抵抗を有効にする
    pinMode(switchPin, INPUT_PULLUP);

    // 画面をクリアして、初期メッセージを表示
    M5.Lcd.clear();
    M5.Lcd.setCursor(0, 0);
    M5.Lcd.setTextSize(2);
    M5.Lcd.print("Switch State:");
}

// 繰り返し行う処理を書きます。今回はないので空欄です。
void swicth_test_loop() {
    // スイッチの状態をチェック
    int state = digitalRead(switchPin);

    // スイッチの状態に応じて表示内容を更新
    M5.Lcd.setCursor(0, 30);
    if (state == LOW) {
        M5.Lcd.print("Switch: Pressed ");
    } else {
        M5.Lcd.print("Switch: Released");
    }

    delay(100); // 状態更新のために少し待つ
}

